<!DOCTYPE html>
<html>
<head>
  <title>抓取 LINE User ID</title>
  <script src="https://static.line-scdn.net/liff/edge/2/sdk.js"></script>
</head>
<body>
  <h2>LINE User ID 測試</h2>
  <button onclick="showUserId()">顯示 User ID</button>
  <p id="userId"></p>

  <script>
    // 已知 LIFF ID
    const liffId = "2007958791-d98aJyrA";

    // 初始化 LIFF
    liff.init({ liffId: liffId })
      .then(() => {
        // 如果未登入 LINE，自動跳出登入畫面
        if (!liff.isLoggedIn()) {
          liff.login();
        }
      })
      .catch(err => console.error("LIFF 初始化失敗", err));

    // 顯示 LINE User ID
    function showUserId() {
      try {
        const userId = liff.getContext().userId;
        document.getElementById("userId").innerText = "你的 LINE User ID: " + userId;
        console.log("LINE User ID:", userId);
      } catch (err) {
        console.error("抓取 User ID 失敗", err);
      }
    }
  </script>
</body>
</html>
